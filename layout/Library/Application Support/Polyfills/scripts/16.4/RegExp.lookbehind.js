"use strict";function _toConsumableArray(r){return _arrayWithoutHoles(r)||_iterableToArray(r)||_unsupportedIterableToArray(r)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(r,a){if(r){if("string"==typeof r)return _arrayLikeToArray(r,a);var t={}.toString.call(r).slice(8,-1);return"Object"===t&&r.constructor&&(t=r.constructor.name),"Map"===t||"Set"===t?Array.from(r):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_arrayLikeToArray(r,a):void 0}}function _iterableToArray(r){if("undefined"!=typeof Symbol&&null!=r[Symbol.iterator]||null!=r["@@iterator"])return Array.from(r)}function _arrayWithoutHoles(r){if(Array.isArray(r))return _arrayLikeToArray(r)}function _arrayLikeToArray(r,a){(null==a||a>r.length)&&(a=r.length);for(var e=0,n=Array(a);e<a;e++)n[e]=r[e];return n}(function(){if(typeof window!=="undefined"&&window.location&&window.location.hostname==="x.com"){return}if(typeof window!=="undefined"&&window.__regExpLookbehindPatched){return}var NativeRegExp=RegExp;var nativeExec=RegExp.prototype.exec;var nativeTest=RegExp.prototype.test;var nativeStringReplace=String.prototype.replace;var nativeStringMatch=String.prototype.match;var disablePatch=false;var isInitializing=false;function updateRegExpStatics(match,input){if(!match){return}RegExp.lastMatch=RegExp.$_=RegExp["$&"]=match[0]||"";RegExp.leftContext=RegExp["$`"]=input.slice(0,match.index)||"";RegExp.rightContext=RegExp["$'"]=input.slice(match.index+match[0].length)||"";RegExp.lastParen=RegExp["$+"]="";for(var i=1;i<=9;i++){RegExp["$"+i]=""}for(var _i=1;_i<match.length&&_i<=9;_i++){RegExp["$"+_i]=match[_i]||"";if(match[_i]){RegExp.lastParen=RegExp["$+"]=match[_i]}}}function containsLookbehind(pattern){if(typeof pattern!=="string")return false;for(var i=0;i<pattern.length-3;i++){if(pattern[i]==="\\"){i++;continue}if(pattern[i]==="("&&pattern[i+1]==="?"&&pattern[i+2]==="<"&&(pattern[i+3]==="="||pattern[i+3]==="!")){return true}}return false}function extractLookbehind(pattern){var lbMatch;try{disablePatch=true;lbMatch=nativeExec.call(/^(\(\?<([=!])((?:\\.|[^\\()])*)\))/,pattern)}finally{disablePatch=false}if(!lbMatch)return null;var rest=pattern.slice(lbMatch[1].length);if(rest.includes("(?<=")||rest.includes("(?<!")){return null}return{full:lbMatch[1],type:lbMatch[2],pattern:lbMatch[3],rest:rest}}function emulateExec(str){if(disablePatch)return nativeExec.call(this,str);var parsed=this.__lookbehind;if(!parsed){var result=nativeExec.call(this,str);return result}var lbRe,mainRe;try{disablePatch=true;lbRe=new NativeRegExp(parsed.pattern+"$",this.__originalFlags.replace("g",""));mainRe=new NativeRegExp(parsed.rest,this.__originalFlags.replace("g",""))}catch(e){disablePatch=false;return null}finally{disablePatch=false}var maxIterations=Math.min(str.length+100,5e3);var iterationCount=0;for(var pos=0;pos<=str.length&&iterationCount<maxIterations;pos++){iterationCount++;if(iterationCount%1e3===0&&str.length>1e3){if(pos<str.length-100){pos+=10}}var mainMatch=void 0;try{disablePatch=true;mainRe.lastIndex=0;mainMatch=mainRe.exec(str.slice(pos))}finally{disablePatch=false}if(!mainMatch||mainMatch.index!==0)continue;var prefix=str.slice(0,pos);var lbMatchFound=void 0;try{disablePatch=true;lbMatchFound=lbRe.test(prefix)}finally{disablePatch=false}if(parsed.type==="="&&lbMatchFound||parsed.type==="!"&&!lbMatchFound){mainMatch.index=pos;mainMatch.input=str;updateRegExpStatics(mainMatch,str);return mainMatch}}updateRegExpStatics(null,str);return null}function emulateTest(str){if(disablePatch)return nativeTest.call(this,str);var result=emulateExec.call(this,str);return result!==null}function PatchedRegExp(pattern,flags){var _ref;var patternStr=typeof pattern==="string"?pattern:pattern.source;var flagsStr=(_ref=flags!==null&&flags!==void 0?flags:pattern&&pattern.flags)!==null&&_ref!==void 0?_ref:"";if(!containsLookbehind(patternStr)){return new NativeRegExp(patternStr,flagsStr)}var parsed=extractLookbehind(patternStr);if(!parsed){return new NativeRegExp(patternStr,flagsStr)}var fakePattern=parsed.rest;var re=new NativeRegExp(fakePattern,flagsStr);re.__lookbehind=parsed;re.__originalFlags=flagsStr;re.exec=emulateExec;re.test=emulateTest;return re}PatchedRegExp.prototype=NativeRegExp.prototype;PatchedRegExp.prototype.constructor=PatchedRegExp;RegExp=PatchedRegExp;RegExp.prototype.exec=function patchedExec(str){if(disablePatch)return nativeExec.call(this,str);var patternStr=this.source;var flagsStr=this.flags;if(!containsLookbehind(patternStr)){var _result=nativeExec.call(this,str);return _result}var parsed=extractLookbehind(patternStr);if(!parsed){return nativeExec.call(this,str)}var fake=new NativeRegExp(parsed.rest,flagsStr);fake.__lookbehind=parsed;fake.__originalFlags=flagsStr;var result=emulateExec.call(fake,str);return result};RegExp.prototype.test=function patchedTest(str){if(disablePatch)return nativeTest.call(this,str);var patternStr=this.source;var flagsStr=this.flags;if(!containsLookbehind(patternStr)){return nativeTest.call(this,str)}var parsed=extractLookbehind(patternStr);if(!parsed){return nativeTest.call(this,str)}var fake=new NativeRegExp(parsed.rest,flagsStr);fake.__lookbehind=parsed;fake.__originalFlags=flagsStr;return emulateTest.call(fake,str)};String.prototype.replace=function patchedReplace(searchValue,replaceValue){if(disablePatch||isInitializing)return nativeStringReplace.call(this,searchValue,replaceValue);if(!(searchValue instanceof RegExp)&&!(searchValue instanceof NativeRegExp)){return nativeStringReplace.call(this,searchValue,replaceValue)}var patternStr=searchValue.source;var flagsStr=searchValue.flags;if(!containsLookbehind(patternStr)){return nativeStringReplace.call(this,searchValue,replaceValue)}var parsed=extractLookbehind(patternStr);if(!parsed){return nativeStringReplace.call(this,searchValue,replaceValue)}var str=String(this);var isGlobal=flagsStr.includes("g");var isFunction=typeof replaceValue==="function";if(isGlobal){console.warn("Global lookbehind replace falls back to native behavior");return nativeStringReplace.call(this,searchValue,replaceValue)}var result=str;var lastIndex=0;var offset=0;var patchedRegExp=new NativeRegExp(parsed.rest,flagsStr.replace("g",""));patchedRegExp.__lookbehind=parsed;patchedRegExp.__originalFlags=flagsStr.replace("g","");var maxIterations=Math.max(str.length+100,1e3);var iterationCount=0;var _loop=function _loop(){iterationCount++;var match;try{isInitializing=true;match=emulateExec.call(patchedRegExp,str.slice(lastIndex))}finally{isInitializing=false}if(!match)return 0;var actualIndex=lastIndex+match.index;var matchStr=match[0];if(matchStr.length===0&&lastIndex===actualIndex){lastIndex=actualIndex+1;return 1}var replacement;if(isFunction){var args=[matchStr].concat(_toConsumableArray(match.slice(1)),[actualIndex,str]);replacement=String(replaceValue.apply(undefined,args))}else{replacement=nativeStringReplace.call(String(replaceValue),/\$(\$|&|`|'|\d+)/g,function(_,p1){if(p1==="$")return"$";if(p1==="&")return matchStr;if(p1==="`")return str.slice(0,actualIndex);if(p1==="'")return str.slice(actualIndex+matchStr.length);var num=parseInt(p1,10);return match[num]||""})}result=result.slice(0,actualIndex+offset)+replacement+result.slice(actualIndex+offset+matchStr.length);offset+=replacement.length-matchStr.length;var nextPos=actualIndex+matchStr.length;lastIndex=matchStr.length===0?Math.max(nextPos,actualIndex+1):nextPos;if(!isGlobal)return 0},_ret;while(lastIndex<str.length&&iterationCount<maxIterations){_ret=_loop();if(_ret===0)break;if(_ret===1)continue}return result};String.prototype.match=function patchedMatch(regexp){if(disablePatch||isInitializing)return nativeStringMatch.call(this,regexp);if(!(regexp instanceof RegExp)&&!(regexp instanceof NativeRegExp)){return nativeStringMatch.call(this,regexp)}var patternStr=regexp.source;var flagsStr=regexp.flags;if(!containsLookbehind(patternStr)){return nativeStringMatch.call(this,regexp)}var parsed=extractLookbehind(patternStr);if(!parsed){return nativeStringMatch.call(this,regexp)}var str=String(this);var isGlobal=flagsStr.includes("g");var patchedRegExp=new NativeRegExp(parsed.rest,flagsStr.replace("g",""));patchedRegExp.__lookbehind=parsed;patchedRegExp.__originalFlags=flagsStr.replace("g","");if(isGlobal){console.warn("Global lookbehind patterns fall back to native behavior");return nativeStringMatch.call(this,regexp)}else{var match;try{isInitializing=true;match=emulateExec.call(patchedRegExp,str)}finally{isInitializing=false}return match}};if(typeof window!=="undefined"){window.__regExpLookbehindPatched=true}})();